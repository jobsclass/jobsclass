# JobsClass DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ ê°€ì´ë“œ

## âœ… ì™„ë£Œëœ ì‘ì—…

1. **ì½”ë“œ ì „ì²´ í†µí•© ì™„ë£Œ**
   - `products` â†’ `services` í…Œì´ë¸”ë¡œ í†µì¼
   - `user_id` â†’ `partner_id` ë³€ê²½
   - `product_id` â†’ `service_id` ë³€ê²½
   - 11ê°œ íŒŒì¼ ìˆ˜ì • ì™„ë£Œ
   - ë°±ì—… API ì‚­ì œ

2. **ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ì¤€ë¹„ ì™„ë£Œ**
   - íŒŒì¼ ìœ„ì¹˜: `/supabase/migrations/20260204_unified_migration.sql`
   - ì•ˆì „í•œ ë§ˆì´ê·¸ë ˆì´ì…˜ (ê¸°ì¡´ ë°ì´í„° ë³´ì¡´)

## ğŸš€ DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ ë°©ë²•

### 1ë‹¨ê³„: Supabase ëŒ€ì‹œë³´ë“œ ì ‘ì†

URL: https://pzjedtgqrqcipfmtkoce.supabase.co

### 2ë‹¨ê³„: SQL Editor ì—´ê¸°

ì™¼ìª½ ë©”ë‰´ì—ì„œ **SQL Editor** ì„ íƒ

### 3ë‹¨ê³„: ë§ˆì´ê·¸ë ˆì´ì…˜ SQL ë³µì‚¬

ë‹¤ìŒ íŒŒì¼ì˜ ì „ì²´ ë‚´ìš©ì„ ë³µì‚¬:
```
/home/user/webapp/supabase/migrations/20260204_unified_migration.sql
```

ë˜ëŠ” GitHubì—ì„œ í™•ì¸:
https://github.com/jobsclass/jobsclass/blob/main/supabase/migrations/20260204_unified_migration.sql

### 4ë‹¨ê³„: SQL ì‹¤í–‰

1. SQL Editorì— ë¶™ì—¬ë„£ê¸°
2. **RUN** ë²„íŠ¼ í´ë¦­
3. ì„±ê³µ ë©”ì‹œì§€ í™•ì¸:
   ```
   âœ… user_profiles ì—…ë°ì´íŠ¸ ì™„ë£Œ
   âœ… services í…Œì´ë¸” ì—…ë°ì´íŠ¸ ì™„ë£Œ
   âœ… carts í…Œì´ë¸” ì—…ë°ì´íŠ¸ ì™„ë£Œ
   âœ… orders í…Œì´ë¸” ì—…ë°ì´íŠ¸ ì™„ë£Œ
   âœ…âœ…âœ… JobsClass í†µí•© ì™„ë£Œ! âœ…âœ…âœ…
   ```

## ğŸ“‹ ë§ˆì´ê·¸ë ˆì´ì…˜ ë‚´ìš©

### 1. user_profiles í…Œì´ë¸” í™•ì¥
- `display_name` - í‘œì‹œ ì´ë¦„
- `username` - ì‚¬ìš©ìëª… (unique)
- `business_number` - ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸
- `business_registration_file` - ì‚¬ì—…ìë“±ë¡ì¦ íŒŒì¼
- `verification_status` - ê²€ì¦ ìƒíƒœ
- `onboarding_complete` - ì˜¨ë³´ë”© ì™„ë£Œ ì—¬ë¶€
- `role` - ì—­í•  (partner/buyer/admin)
- `subscription_plan` - êµ¬ë… í”Œëœ
- `subscription_status` - êµ¬ë… ìƒíƒœ

### 2. services í…Œì´ë¸” í™•ì¥ (JobsClass v2.0)
- `category`, `subcategory` - ì¹´í…Œê³ ë¦¬
- `service_type` - ì„œë¹„ìŠ¤ ìœ í˜•
- `slug` - URL ìŠ¬ëŸ¬ê·¸
- `features`, `requirements`, `deliverables` - ë°°ì—´ í•„ë“œ
- `curriculum` - ì»¤ë¦¬í˜ëŸ¼ (JSONB)
- `duration_hours`, `duration_days` - ê¸°ê°„
- `original_price` - ì›ê°€
- `currency` - í†µí™”
- `view_count`, `purchase_count` - í†µê³„
- `rating_average`, `rating_count` - í‰ì 
- `partner_id` - íŒŒíŠ¸ë„ˆ ID (user_idì—ì„œ ë³€ê²½)

### 3. carts í…Œì´ë¸” í†µí•©
- `product_id` â†’ `service_id` ë³€ê²½
- `user_id` â†’ `client_id` ë³€ê²½

### 4. orders í…Œì´ë¸” í™•ì¥ (10% ìˆ˜ìˆ˜ë£Œ)
- `product_id` â†’ `service_id` ë³€ê²½
- `buyer_id` â†’ `client_id` ë³€ê²½
- `seller_id` â†’ `partner_id` ë³€ê²½
- `platform_fee` - í”Œë«í¼ ìˆ˜ìˆ˜ë£Œ (10%)
- `partner_amount` - íŒŒíŠ¸ë„ˆ ìˆ˜ìµ (90%)
- `order_number` - ì£¼ë¬¸ ë²ˆí˜¸

### 5. service_reviews í…Œì´ë¸” ìƒì„±
- ì„œë¹„ìŠ¤ ë¦¬ë·° ì‹œìŠ¤í…œ
- 1-5 ë³„ì 
- êµ¬ë§¤ìë§Œ ì‘ì„± ê°€ëŠ¥

### 6. RLS ì •ì±… ì ìš©
- ëª¨ë“  í…Œì´ë¸”ì— Row Level Security ì ìš©
- íŒŒíŠ¸ë„ˆ: ë³¸ì¸ ì„œë¹„ìŠ¤ë§Œ ê´€ë¦¬
- êµ¬ë§¤ì: ë³¸ì¸ ì¥ë°”êµ¬ë‹ˆ/ì£¼ë¬¸ë§Œ ì ‘ê·¼
- ê³µê°œ ë°ì´í„°: ê²Œì‹œëœ ì„œë¹„ìŠ¤/ë¦¬ë·°ë§Œ ì¡°íšŒ

## âš ï¸ ì£¼ì˜ì‚¬í•­

### ì•ˆì „í•œ ë§ˆì´ê·¸ë ˆì´ì…˜
- ê¸°ì¡´ ë°ì´í„°ëŠ” **ëª¨ë‘ ë³´ì¡´**ë©ë‹ˆë‹¤
- ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì»¬ëŸ¼ì€ ê±´ë„ˆëœë‹ˆë‹¤
- ì—ëŸ¬ê°€ ë°œìƒí•´ë„ ê³„ì† ì§„í–‰ë©ë‹ˆë‹¤

### ë¡¤ë°± ë¶ˆí•„ìš”
- ì¶”ê°€ë§Œ í•˜ê³  ì‚­ì œëŠ” í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
- ê¸°ì¡´ í…Œì´ë¸” êµ¬ì¡°ëŠ” ìœ ì§€ë©ë‹ˆë‹¤

## ğŸ§ª ë§ˆì´ê·¸ë ˆì´ì…˜ í›„ í…ŒìŠ¤íŠ¸

### 1. íšŒì›ê°€ì… í…ŒìŠ¤íŠ¸
- https://jobsclass.vercel.app/auth/signup
- ìƒˆë¡œìš´ ê³„ì • ìƒì„±
- `user_profiles` í…Œì´ë¸”ì— ìƒˆ í•„ë“œ í™•ì¸

### 2. ì˜¨ë³´ë”© í…ŒìŠ¤íŠ¸
- ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ ì…ë ¥
- ì‚¬ì—…ìë“±ë¡ì¦ ì—…ë¡œë“œ
- `/partner/dashboard?welcome=true` ë¦¬ë””ë ‰ì…˜ í™•ì¸

### 3. ì„œë¹„ìŠ¤ ë“±ë¡ í…ŒìŠ¤íŠ¸
- íŒŒíŠ¸ë„ˆ ëŒ€ì‹œë³´ë“œ â†’ ì„œë¹„ìŠ¤ ë“±ë¡
- 7ê°€ì§€ ì„œë¹„ìŠ¤ ìœ í˜• ì„ íƒ
- 8ê°œ ì¹´í…Œê³ ë¦¬ ì„ íƒ
- ì €ì¥ í›„ `services` í…Œì´ë¸” í™•ì¸

### 4. ì¥ë°”êµ¬ë‹ˆ í…ŒìŠ¤íŠ¸
- ì„œë¹„ìŠ¤ ìƒì„¸ í˜ì´ì§€ â†’ ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€
- `/cart` í˜ì´ì§€ì—ì„œ í™•ì¸
- 10% ìˆ˜ìˆ˜ë£Œ ê³„ì‚° í™•ì¸

### 5. ì£¼ë¬¸ í…ŒìŠ¤íŠ¸
- ì¥ë°”êµ¬ë‹ˆ â†’ êµ¬ë§¤í•˜ê¸°
- ì£¼ë¬¸ ìƒì„± í™•ì¸
- `orders` í…Œì´ë¸”ì— `platform_fee`, `partner_amount` í™•ì¸

## ğŸ“Š ì˜ˆìƒ ê²°ê³¼

### ì„±ê³µ ì‹œ
```sql
âœ… user_profiles ì—…ë°ì´íŠ¸ ì™„ë£Œ
âœ… services í…Œì´ë¸” ì—…ë°ì´íŠ¸ ì™„ë£Œ
âœ… carts í…Œì´ë¸” ì—…ë°ì´íŠ¸ ì™„ë£Œ
âœ… orders í…Œì´ë¸” ì—…ë°ì´íŠ¸ ì™„ë£Œ

âœ…âœ…âœ… JobsClass í†µí•© ì™„ë£Œ! âœ…âœ…âœ…

ì—…ë°ì´íŠ¸:
  - user_profiles: 9ê°œ í•„ë“œ ì¶”ê°€
  - services: JobsClass v2.0 í•„ë“œ ì¶”ê°€
  - carts: product_id â†’ service_id
  - orders: 10% ìˆ˜ìˆ˜ë£Œ í•„ë“œ ì¶”ê°€
  - service_reviews: ìƒì„±
```

## ğŸ” ë¬¸ì œ í•´ê²°

### ì—ëŸ¬: "column already exists"
- ì •ìƒì…ë‹ˆë‹¤. ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì»¬ëŸ¼ì€ ê±´ë„ˆëœë‹ˆë‹¤.

### ì—ëŸ¬: "permission denied"
- Supabase í”„ë¡œì íŠ¸ ì†Œìœ ì ê¶Œí•œ í•„ìš”
- jobsclass24@gmail.com ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸

### ì—ëŸ¬: "relation does not exist"
- `services`, `carts`, `orders` í…Œì´ë¸”ì´ ì—†ëŠ” ê²½ìš°
- ë¨¼ì € `/supabase/migrations/20260204_jobsclass_v2_complete.sql` ì‹¤í–‰

## ğŸ“ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ë©´:
1. Supabase ëŒ€ì‹œë³´ë“œì—ì„œ ì—ëŸ¬ ë¡œê·¸ í™•ì¸
2. SQL Editorì˜ ì—ëŸ¬ ë©”ì‹œì§€ ë³µì‚¬
3. GitHub Issue ìƒì„± ë˜ëŠ” ë‹´ë‹¹ìì—ê²Œ ê³µìœ 

## âœ¨ ë‹¤ìŒ ë‹¨ê³„

ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ í›„:
1. [ ] íšŒì›ê°€ì… í…ŒìŠ¤íŠ¸
2. [ ] ì„œë¹„ìŠ¤ ë“±ë¡ í…ŒìŠ¤íŠ¸
3. [ ] ì¥ë°”êµ¬ë‹ˆ í…ŒìŠ¤íŠ¸
4. [ ] ì£¼ë¬¸ í…ŒìŠ¤íŠ¸
5. [ ] API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
6. [ ] ê²°ì œ ì—°ë™ (Toss Payments)
7. [ ] AI ìƒë‹´ ê¸°ëŠ¥ ê°œë°œ
8. [ ] ê´€ë¦¬ì í˜ì´ì§€ ê°œì„ 

---

**ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤€ë¹„ ì™„ë£Œ!** ğŸš€

ì´ì œ Supabase SQL Editorì—ì„œ `20260204_unified_migration.sql`ì„ ì‹¤í–‰í•˜ì„¸ìš”!
