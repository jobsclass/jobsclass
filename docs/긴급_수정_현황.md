# ğŸš¨ ê¸´ê¸‰ ìˆ˜ì • ì™„ë£Œ ë° ë‚¨ì€ ì‘ì—…

## âœ… ì™„ë£Œëœ ìˆ˜ì •

### 1. DB ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ìƒì„±
- **íŒŒì¼**: `supabase/migrations/20260129_update_service_types.sql`
- **ë‚´ìš©**:
  - products.product_type â†’ products.type ì»¬ëŸ¼ëª… ë³€ê²½
  - CHECK constraint ì—…ë°ì´íŠ¸ (6ê°€ì§€ íƒ€ì…)
  - ê¸°ì¡´ ë°ì´í„° ìë™ ë§ˆì´ê·¸ë ˆì´ì…˜
  - ì¹´í…Œê³ ë¦¬ CHECK constraint ì—…ë°ì´íŠ¸ (8ê°œ)
  - ì´ë¯¸ì§€ í•„ë“œëª… í†µì¼ (thumbnail_url â†’ image_url)
  - ì¸ë±ìŠ¤ ìµœì í™”

### 2. ì„œë¹„ìŠ¤ ë¦¬ìŠ¤íŠ¸ í˜ì´ì§€ ìˆ˜ì •
- **íŒŒì¼**: `app/dashboard/services/page.tsx`
- **ìˆ˜ì •ì‚¬í•­**:
  - service_type â†’ type
  - is_published â†’ status
  - thumbnail_url â†’ image_url
  - price â†’ base_price
  - ìƒˆë¡œìš´ 6ê°€ì§€ íƒ€ì…ìœ¼ë¡œ í•„í„° ì—…ë°ì´íŠ¸

### 3. ì„œë¹„ìŠ¤ ë“±ë¡ í˜ì´ì§€ ë¶€ë¶„ ìˆ˜ì •
- **íŒŒì¼**: `app/dashboard/services/new/page.tsx`
- **ìˆ˜ì •ì‚¬í•­**:
  - ìƒˆë¡œìš´ 6ê°€ì§€ íƒ€ì… import
  - ìƒˆë¡œìš´ 8ê°œ ì¹´í…Œê³ ë¦¬ import
  - íŒë§¤ ë°©ì‹(sale_type)ê³¼ ì„œë¹„ìŠ¤ íƒ€ì…(type) ë¶„ë¦¬

---

## âš ï¸ ë¯¸ì™„ì„± ì‘ì—… (ì¤‘ìš”ë„ ìˆœ)

### ğŸ”´ Critical - ì¦‰ì‹œ ìˆ˜ì • í•„ìš”

#### 1. DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
**ì‘ì—…**: Supabase SQL Editorì—ì„œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
```sql
-- supabase/migrations/20260129_site_settings.sql
-- supabase/migrations/20260129_update_service_types.sql
```
**ì˜í–¥**: ì´ê±° ì•ˆ í•˜ë©´ ëª¨ë“  ì„œë¹„ìŠ¤ ê´€ë ¨ ê¸°ëŠ¥ ì‘ë™ ì•ˆ í•¨
**ì†Œìš” ì‹œê°„**: 2ë¶„

#### 2. ì„œë¹„ìŠ¤ ìƒì„¸ í˜ì´ì§€ ìˆ˜ì •
**íŒŒì¼**: `app/marketplace/products/[id]/page.tsx`
**ë¬¸ì œ**: 
- service_type â†’ type
- íƒ€ì… ë¼ë²¨ í‘œì‹œ ì‹œ getAllServiceTypes() ì‚¬ìš©
- ì´ë¯¸ì§€ í•„ë“œëª… í†µì¼

#### 3. API ë¼ìš°íŠ¸ í•„ë“œëª… í†µì¼
**íŒŒì¼ë“¤**:
- `app/api/products/route.ts` (ì´ë¯¸ ìˆ˜ì •ë¨)
- `app/api/products/[id]/route.ts` (ì´ë¯¸ ìˆ˜ì •ë¨)
- `app/api/services/*` (í™•ì¸ í•„ìš”)

#### 4. ì„œë¹„ìŠ¤ ë“±ë¡/ìˆ˜ì • í¼ ì™„ì „ ì—…ë°ì´íŠ¸
**íŒŒì¼ë“¤**:
- `app/dashboard/services/new/page.tsx`
- `app/dashboard/services/[id]/edit/page.tsx`
- `app/marketplace/products/new/page.tsx`

**í•„ìš” ì‘ì—…**:
- íƒ€ì… ì„ íƒ UI ì—…ë°ì´íŠ¸
- ì¹´í…Œê³ ë¦¬ ì„ íƒ UI ì—…ë°ì´íŠ¸
- ì œì¶œ ì‹œ ì˜¬ë°”ë¥¸ í•„ë“œëª… ì‚¬ìš©
- ê²€ì¦ ë¡œì§ ì—…ë°ì´íŠ¸

#### 5. íŒŒíŠ¸ë„ˆ/í´ë¼ì´ì–¸íŠ¸ ëŒ€ì‹œë³´ë“œ íƒ€ì… í•„í„°
**íŒŒì¼ë“¤**:
- `app/partner/dashboard/page.tsx`
- `app/client/dashboard/page.tsx`
- `app/dashboard/page.tsx`

---

### ğŸŸ¡ Important - ë¹ ë¥¸ ì‹œì¼ ë‚´ ìˆ˜ì •

#### 6. ë©”ì¸ í˜ì´ì§€ í‘¸í„° ë™ì  ë°ì´í„° ì—°ë™
**íŒŒì¼**: `app/page.tsx`
**ì‘ì—…**: site_settingsì—ì„œ í‘¸í„° ë°ì´í„° ê°€ì ¸ì˜¤ê¸°

#### 7. ëª¨ë“  í˜ì´ì§€ ì´ë¯¸ì§€ í•„ë“œëª… í†µì¼
**íŒ¨í„´**: `thumbnail_url` â†’ `image_url`
**ì˜í–¥**: ì¸ë„¤ì¼ í‘œì‹œ ì•ˆ ë  ìˆ˜ ìˆìŒ

#### 8. Admin ê¶Œí•œ ì²´í¬ í†µì¼
**í˜„ì¬**:
- `app/admin/layout.tsx`: role === 'admin'
- `app/admin/page.tsx`: role === 'admin'
**ê¶Œì¥**: is_admin = true ì‚¬ìš© (ë” ëª…í™•)

---

## ğŸ“ í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### í•„ìˆ˜ í…ŒìŠ¤íŠ¸ (ë‚´ì¼ ì•„ì¹¨)

#### 1ë‹¨ê³„: DB ë§ˆì´ê·¸ë ˆì´ì…˜ í™•ì¸
```sql
-- products í…Œì´ë¸” í™•ì¸
SELECT column_name, data_type 
FROM information_schema.columns 
WHERE table_name = 'products' 
  AND column_name IN ('type', 'product_type', 'image_url', 'thumbnail_url');

-- ë°ì´í„° í™•ì¸
SELECT type, category, COUNT(*) 
FROM products 
GROUP BY type, category;
```

#### 2ë‹¨ê³„: ì„œë¹„ìŠ¤ ë“±ë¡ í…ŒìŠ¤íŠ¸
1. [ ] /dashboard/services/new ì ‘ì†
2. [ ] 6ê°€ì§€ íƒ€ì… ì„ íƒ ê°€ëŠ¥í•œì§€ í™•ì¸
3. [ ] 8ê°œ ì¹´í…Œê³ ë¦¬ ì„ íƒ ê°€ëŠ¥í•œì§€ í™•ì¸
4. [ ] ì„œë¹„ìŠ¤ ë“±ë¡ ì‹œë„
5. [ ] ì—ëŸ¬ í™•ì¸

#### 3ë‹¨ê³„: ë§ˆì¼“í”Œë ˆì´ìŠ¤ í…ŒìŠ¤íŠ¸
1. [ ] /marketplace ì ‘ì†
2. [ ] 6ê°€ì§€ íƒ€ì… í•„í„° ì‘ë™ í™•ì¸
3. [ ] 8ê°œ ì¹´í…Œê³ ë¦¬ í•„í„° ì‘ë™ í™•ì¸
4. [ ] ì„œë¹„ìŠ¤ ìƒì„¸ í˜ì´ì§€ ì ‘ì†
5. [ ] íƒ€ì…/ì¹´í…Œê³ ë¦¬ í‘œì‹œ í™•ì¸

#### 4ë‹¨ê³„: Admin í…ŒìŠ¤íŠ¸
1. [ ] /admin ì ‘ì†
2. [ ] ëŒ€ì‹œë³´ë“œ í†µê³„ í™•ì¸
3. [ ] íŒŒíŠ¸ë„ˆ ê´€ë¦¬ í™•ì¸
4. [ ] ì„œë¹„ìŠ¤ ê´€ë¦¬ í™•ì¸
5. [ ] í‘¸í„° ì„¤ì • ì €ì¥ í…ŒìŠ¤íŠ¸

---

## ğŸ¯ ê¶Œì¥ ì‘ì—… ìˆœì„œ (ë‚´ì¼ ì•„ì¹¨)

### Phase 1: DB ë§ˆì´ê·¸ë ˆì´ì…˜ (5ë¶„)
1. Supabase SQL Editor ì ‘ì†
2. `20260129_site_settings.sql` ì‹¤í–‰
3. `20260129_update_service_types.sql` ì‹¤í–‰
4. ê²€ì¦ ì¿¼ë¦¬ ì‹¤í–‰

### Phase 2: Critical ìˆ˜ì • (30ë¶„)
1. ì„œë¹„ìŠ¤ ìƒì„¸ í˜ì´ì§€ ìˆ˜ì •
2. ì„œë¹„ìŠ¤ ë“±ë¡/ìˆ˜ì • í¼ ìˆ˜ì •
3. API ë¼ìš°íŠ¸ í™•ì¸

### Phase 3: í…ŒìŠ¤íŠ¸ (30ë¶„)
1. ì„œë¹„ìŠ¤ ë“±ë¡ í”Œë¡œìš°
2. ë§ˆì¼“í”Œë ˆì´ìŠ¤ í•„í„°
3. Admin ê¸°ëŠ¥
4. ë²„ê·¸ ë°œê²¬ ì‹œ ì¦‰ì‹œ ìˆ˜ì •

### Phase 4: ì¶”ê°€ ê°œì„  (ì„ íƒ)
1. í‘¸í„° ë™ì  ë°ì´í„°
2. ì´ë¯¸ì§€ í•„ë“œëª… ì „ì²´ í†µì¼
3. ì—ëŸ¬ ë©”ì‹œì§€ ê°œì„ 

---

## ğŸ’¡ ë¹ ë¥¸ ìˆ˜ì • ê°€ì´ë“œ

### íƒ€ì…/ì¹´í…Œê³ ë¦¬ í‘œì‹œ íŒ¨í„´
```typescript
import { getAllServiceTypes, getAllCategories } from '@/lib/constants/services'

const serviceTypes = getAllServiceTypes()
const categories = getAllCategories()

// íƒ€ì… ì´ë¦„ í‘œì‹œ
const typeName = serviceTypes.find(t => t.id === service.type)?.name

// ì¹´í…Œê³ ë¦¬ ì´ë¦„ í‘œì‹œ
const categoryName = categories.find(c => c.id === service.category)?.name
```

### í•„ë“œëª… ë§¤í•‘
```typescript
// Old â†’ New
product_type â†’ type
service_type â†’ type
is_published â†’ status ('published', 'draft', 'archived')
thumbnail_url â†’ image_url
price â†’ base_price
```

---

## ğŸ“Œ ì£¼ìš” íŒŒì¼ ëª©ë¡

### ìˆ˜ì • ì™„ë£Œ
- âœ… `lib/constants/services.ts`
- âœ… `app/page.tsx`
- âœ… `app/marketplace/page.tsx`
- âœ… `app/dashboard/services/page.tsx`
- âœ… `app/api/products/route.ts`
- âœ… `app/api/products/[id]/route.ts`
- âœ… `supabase/migrations/20260129_update_service_types.sql`

### ìˆ˜ì • í•„ìš”
- âš ï¸ `app/dashboard/services/new/page.tsx` (ë¶€ë¶„)
- âš ï¸ `app/dashboard/services/[id]/edit/page.tsx`
- âš ï¸ `app/marketplace/products/[id]/page.tsx`
- âš ï¸ `app/marketplace/products/new/page.tsx`
- âš ï¸ `app/partner/dashboard/page.tsx`
- âš ï¸ `app/client/dashboard/page.tsx`

---

## ğŸ”§ ê¸´ê¸‰ í•«í”½ìŠ¤ ìŠ¤í¬ë¦½íŠ¸

ì„œë¹„ìŠ¤ ìƒì„¸ í˜ì´ì§€ë§Œì´ë¼ë„ ë¹ ë¥´ê²Œ ìˆ˜ì •í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

```bash
# 1. ì»¤ë°‹
git add -A
git commit -m "wip: ì„œë¹„ìŠ¤ íƒ€ì…/ì¹´í…Œê³ ë¦¬ ë¶€ë¶„ ì—…ë°ì´íŠ¸"

# 2. ì„œë¹„ìŠ¤ ìƒì„¸ í˜ì´ì§€ ìˆ˜ì •
# app/marketplace/products/[id]/page.tsx

# 3. ë‹¤ì‹œ ì»¤ë°‹
git add -A
git commit -m "fix: ì„œë¹„ìŠ¤ ìƒì„¸ í˜ì´ì§€ íƒ€ì… í‘œì‹œ ìˆ˜ì •"
git push
```

---

## ìµœì¢… ìš”ì•½

**ì™„ë£Œ**: 
- DB ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ìƒì„± âœ…
- í•µì‹¬ ìƒìˆ˜ íŒŒì¼ ìƒì„± âœ…
- ë©”ì¸ í˜ì´ì§€ ì—…ë°ì´íŠ¸ âœ…
- Admin í˜ì´ì§€ êµ¬ì¶• âœ…
- ì¼ë¶€ API ë¼ìš°íŠ¸ ìˆ˜ì • âœ…

**ë‚¨ì€ ì‘ì—…**:
- **ê¸´ê¸‰**: DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
- **ê¸´ê¸‰**: ì„œë¹„ìŠ¤ ìƒì„¸/ë“±ë¡/ìˆ˜ì • í˜ì´ì§€ í•„ë“œëª… í†µì¼
- **ì¤‘ìš”**: ëª¨ë“  í˜ì´ì§€ íƒ€ì…/ì¹´í…Œê³ ë¦¬ í‘œì‹œ ìˆ˜ì •
- **ì„ íƒ**: í‘¸í„° ë™ì  ë°ì´í„°, UI ê°œì„ 

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 
- ê¸´ê¸‰ ì‘ì—…: 1ì‹œê°„
- ì „ì²´ ì™„ë£Œ: 2-3ì‹œê°„

**ë‹¤ìŒ ë‹¨ê³„**:
1. ë‚´ì¼ ì•„ì¹¨ DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ ë¨¼ì €
2. ê·¸ ë‹¤ìŒ ì„œë¹„ìŠ¤ ìƒì„¸ í˜ì´ì§€ ìˆ˜ì •
3. í…ŒìŠ¤íŠ¸í•˜ë©´ì„œ ë°œê²¬ë˜ëŠ” ì´ìŠˆ ì¦‰ì‹œ ìˆ˜ì •
